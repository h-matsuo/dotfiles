#!/usr/bin/env bash

BOLD=$(tput bold)
NORMAL=$(tput sgr0)
GREEN=$(tput setaf 2)

echo "${GREEN}==>${NORMAL} ${BOLD}Checking dependency tree...${NORMAL}"

cd /tmp

brew bundle dump --force

TO_BE_CLEANED_UP=$(brew bundle cleanup)

if [[ -z $TO_BE_CLEANED_UP ]]; then
  exit
fi

echo "$TO_BE_CLEANED_UP"

read -p "${GREEN}==>${NORMAL} ${BOLD}Do you want to continue? [Y/n] ${NORMAL}" INPUT

if [[ $INPUT != 'Y' && $INPUT != 'y' ]]; then
  echo 'Abort.'
  exit
fi

brew bundle cleanup --force
